{% extends 'Default/base.html.twig' %}
{% block body %}
    {% block nav %}
        {% include '/Nav/nav.html.twig' %}
    {% endblock %}
    <div class="content">
        <div class="profil_couverture">
            <ul class="plugin_image">
                <li><img src="{{ info_user.getUserPhoto.couverture }}" class="profil_couverture_img"
                         alt="{{ info_user.username }}"/></li>
                {% for n in info_user.getAlbumCouverture %}
                    <li class="hide_profil"><img src="{{ n.getPhoto }}" alt="{{ info_user.username }}"></li>
                {% endfor %}
            </ul>
            <div class="profile_image">
                <ul class="plugin_image">
                    <li><img alt="{{ info_user.username }}" src="{{ info_user.getUserPhoto.profil }}"></li>
                    {% for n in info_user.getAlbumProfil %}
                        <li class="hide_profil"><img src="{{ n.getPhoto }}" alt="{{ info_user.username }}"></li>
                    {% endfor %}
                </ul>
            </div>
            <div class="name_user">
                {{ info_user.name }} {{ info_user.lastname }}
            </div>
        </div>
        <div class="menu_profile">
            <ul>
                {% if nbr_friends > 0 %}
                    <li><a href="#" data-toggle="modal" data-target="#friend_modal">Amis {{ nbr_friends }}</a></li>
                {% else %}
                    <li><a href="#">Ami 0</a></li>
                {% endif %}
                <li><a href="/show/showalbum">Photos</a></li>
                {% if nbr_invitations > 0 %}
                    <li><a href="#" data-toggle="modal"
                           data-target="#invitation_modal">Invitations {{ nbr_invitations }}</a></li>
                {% else %}
                    <li><a href="#">Invitations 0</a></li>
                {% endif %}
            </ul>
        </div>
        <div style="position: absolute;z-index: 1;left: 72%;">
            <a href="#" data-target="#myModalcouverture" data-toggle="modal"> <img
                        src="http://s10.postimg.org/4rc0fv8jt/camera.png" height="50" width="50"/></a>
        </div>
        <div style="position: absolute; z-index: 1;left:33%;top: 39%">
            <a href="#" data-target="#myModalprofil" data-toggle="modal"><img
                        src="http://s10.postimg.org/4rc0fv8jt/camera.png" height="50" width="50"/></a>
        </div>

        <div class="">
            <div class="row">
                <div class="col-md-5">
                    <div class="col-md-12">
                        <div class="panel panel-primary">
                            <div class="panel-heading">
                                <h3 class="panel-title">User Info</h3>
                            </div>

                            <div class="panel-body">
                                <p><img src="{{ asset('/img/username.png') }}" alt="connected"
                                        class="user_info_img"/> {{ info_user.username }}</p>
                                {% if info_user.isconnect == true %}
                                    <p><img src="{{ asset('/img/connect.png') }}" alt="connected"
                                            class="user_info_img"/> connecter</p>
                                {% elseif info_user.isconnect == false %}
                                    <p><img src="{{ asset('/img/disconnect.png') }}" alt="disconnected"
                                            class="user_info_img"> Pas connecter</p>
                                {% endif %}
                                <p> Derniére connection : {{ info_user.LastConnexion|date("Y-m-d") }}</p>
                                <p> Compte crée le : {{ info_user.CreatedAt|date('Y-m-d') }}</p>
                            </div>


                            <div class="panel-body" id="">
                                <ul class="list" id="list"></ul>
                            </div>


                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="panel panel-primary">
                            <div class="panel-heading">
                                <h3 class="panel-title">Friends</h3>
                            </div>

                            <div class="panel-body">
                                <div class="number_amie">
                                    {% if nbr_friends <= 1 %}
                                        {{ nbr_friends }} ami
                                    {% else %}
                                        {{ nbr_friends }} amis
                                    {% endif %}
                                </div>
                                <ul>
                                    {% for n in friend1 %}
                                        <li class="list"><a href="profil/{{ n.userfriendtwo.getId }}"><img
                                                        src="{{ n.userfriendtwo.getUserPhoto.profil }}"
                                                        alt="profil image" height="50" width="50"/></a>
                                        </li>
                                    {% endfor %}
                                    {% for n in friend2 %}
                                        <li class="list"><a href="profil/{{ n.userfriendone.getId }}"><img
                                                        src="{{ n.userfriendone.getUserPhoto.profil }}"
                                                        alt="profil image" height="50" width="50"/></a>
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-7">
                    <div class="col-md-12">
                        <form method="post" id="enquiry" {{ form_enctype (form3) }}>


                            <div class="containers_profile">
  <span class="select-wrapper pull-left">
      {{ form_label(form3.content) }}
      {{ form_widget(form3.content) }}
  </span>

                                <span class="pull-rights">
     Image/Video
  </span>
                            </div>
                            {{ form_widget(form3.title) }}
                            <input id="my_input" type="submit" value="Publier">

                            {{ form_row(form3._token) }}
                        </form>
                    </div>
                    <div class="col-md-12 top-buffer">
                        {% for n in info_user.getArticles %}
                            <div class="each_post">
                                <div class="row">
                                    <div class="col-md-2">
                                        <a href="/profil/{{ n.getUsers.getId }}"><img
                                                    src="{{ n.getUsers.getUserPhoto.profil }}" alt="profil image"
                                                    style="width: 90px;height: 80px"></a>
                                    </div>
                                    <div class="col-md-9">
                                        <div class="col-md-12">
                                            <p class="m_title"
                                               style="font-size: 20px; font-weight: bold">{{ n.getUsers.username }} {{ n.getUsers.lastname }}
                                            </p>
                                        </div>

                                        <div class="col-md-12">
                                            <p> Publié le {{ n.createdAt|date('Y-m-d') }}</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-12">
                                        <p class="m_title"
                                           style="font-size: 20px;text-align: center;margin-top: 10px;margin-bottom: 10px;">{{ n.title }}</p>
                                    </div>
                                    <div class="col-md-12">
                                        {% if n.type == 'image' %}
                                            <ul class="plugin_image">
                                                <li><img alt="  {{ n.title }}" src="{{ n.content }}"
                                                         style="height: 240px;width: 320px;margin-left: 144px;"></li>
                                            </ul>
                                        {% else %}
                                            <video style="height: 300px;width: 600px" controls>
                                                <source src='{{ asset("Upload/" ~ n.getUsers.getId ~ "/" ~ n.content) }}'
                                                        type="video/mp4">
                                            </video>
                                        {% endif %}

                                    </div>
                                    <div class="col-md-12 form_box">
                                        <div class="col-md-1">
                                            <a href="/profil/{{ info_user.getId }}"><img src="{{ info_user.getUserPhoto.profil }}" alt="profil image"
                                                                                         style="width: 45px;height: 45px;margin-top: 18px;"></a>
                                        </div>
                                        <div class="col-md-10">
                                            <form action="/add/comment/{{ n.id }}">
                                                <div class="form-group">
                                                <textarea class="form-control comment" required
                                                          name="comment"></textarea>
                                                    <input type="submit" class="submit_comment_profil"/>
                                                </div>
                                            </form>
                                            {% set count = 0 %}
                                            {% for c in n.getCommentArticle %}
                                                {% set size = n.getCommentArticle | length %}
                                                {% set count = count + 1 %}
                                                {% if count <= 2 %}
                                                    <div class="col-md-10 comment_box">
                                                        <a href="/profil/{{ c.getUserCommentId.getId }}">
                                                            <img src="{{ c.getUserCommentId.getUserPhoto.profil }}" alt="profil image" style="width: 45px;height: 45px">
                                                        </a>
                                                        {{ c.getUserCommentId.getUsername }}<br/>
                                                        <span class="content_comment">{{ c.getContent }}</span>
                                                    </div>
                                                {% elseif count == size %}
                                                    <div class="col-md-10 comment_box comment_plus">
                                                        <a href="/fullcomment/{{ n.id }}" class="show_all_comment">{{ count - 2 }} commentaires ...</a>
                                                    </div>
                                                {% endif %}
                                            {% endfor %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="friend_modal" role="dialog">
            <div class="modal-dialog">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Amis</h4>
                    </div>
                    <div class="body">
                        <ul>
                            {% for n in all_friend1 %}
                                <li><img src="{{ n.userfriendtwo.getUserPhoto.profil }}" alt="profil image"
                                         class="invitation_img"/> {{ n.userfriendtwo.getUsername }}</li>
                                <br/>
                            {% endfor %}
                            {% for n in all_friend2 %}
                                <li><img src="{{ n.userfriendone.getUserPhoto.profil }}" alt="profil image"
                                         class="invitation_img"/> {{ n.userfriendone.getUsername }}</li>
                                <br/>
                            {% endfor %}
                        </ul>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Fermer</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal invitation -->
        <div class="modal fade" id="invitation_modal" role="dialog">
            <div class="modal-dialog">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Invitations</h4>
                    </div>
                    <div class="body">
                        <ul>
                            {% for n in invitations %}
                                <li>
                                    <a href="profil/{{ n.getUserInvitSender.getId }}"><img
                                                src="{{ n.getUserInvitSender.getUserPhoto.profil }}"
                                                alt="profil image" height="50" width="50"/></a>
                                    {{ n.getUserInvitSender.getUsername }}
                                    <span class="pull-right">
                                             <a href="/accept/{{ n.getUserInvitSender.getId }}">Accepter</a>
                                             <a href="/refuse/{{ n.getUserInvitSender.getId }}">Refuser</a>
                                         </span>
                                </li>
                                <br/>
                            {% endfor %}
                        </ul>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Fermer</button>
                    </div>
                </div>


            </div>
        </div>
    </div>

    <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Open Modal</button>

    <!-- Modal -->
    <div id="myModalprofil" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Nouvelle image de profile</h4>
                </div>
                <div class="modal-body">
                    <form method="post" {{ form_enctype (form1) }}>
                        {{ form_label(form1.profil) }}
                        {{ form_widget(form1.profil) }}
                        {{ form_row(form1._token) }}
                        <button type="submit">Ajouter</button>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>

        </div>
    </div>

    <div id="myModalcouverture" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Nouvelle image de couverture</h4>
                </div>
                <div class="modal-body">
                    <form method="post" {{ form_enctype (form2) }}>
                        {{ form_label(form2.couverture) }}
                        {{ form_widget(form2.couverture) }}
                        {{ form_row(form2._token) }}
                        <button type="submit">Ajouter</button>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>

        </div>
    </div>

{% endblock %}
